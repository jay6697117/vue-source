<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vue 自定义事件</title>
  </head>

  <body>
    <div id="app">
      <button @click="handleClick">发射点击事件</button>
    </div>
    <script src="./js/vue.js"></script>
    <script>
      // Vue 自定义事件
      let vm = new Vue({
        el: '#app',
        methods: {
          handleClick(e) {
            this.$emit('myClick', e);
          }
        }
      });
      // { 'click': [fn1, fn2], 'change': [fn] }

      // 注册事件(订阅消息)
      vm.$on('dataChange', data => {
        console.log('dataChange 0:\n', data);
      });

      vm.$on('dataChange', data => {
        console.log('dataChange 1:\n', data);
      });
      vm.$on('myClick', e => {
        alert('click the button');
        console.log('myClick:\n', e);
      });
      // 触发事件(发布消息)
      vm.$emit('dataChange', 'lalala');
    </script>
  </body>
</html>
